###<%= @class_header %> : <%= @current_function[:function_name] %>()

<h4 style="margin-top: 0px; margin-left: 20px;">â€¢ v<%= @current_function[:version] %></h4>

<% if locals[:incomplete].present? or
    @current_function[:description].empty? or
    @current_function[:lua_code].empty? %>
    <p style= "background:#C4726C; color: white; padding-top: 5px; padding-bottom: 5px;" > The data for this function is not fully filled out yet. </p>
<% else %>
    <p style= "background:#2F4F4F; color: white; padding-top: 5px; padding-bottom: 5px;" > This data for this function is up-to-date, but may be missing some information on uses/restrictions. </p>
<% end %>

<%# LUA CODE %>
<%# Unfortunately, these all HAVE to be at the start of the line or it'll cause problems for the parser. %>
<% if not is_empty( @current_function[:lua_code] ) %>
``` lua
<%= @current_function[:lua_code] %>
```
<%= "> " + @current_function[:lua_comment] if @current_function[:lua_comment].present? %>
<% end %>

<%# DESCRIPTION %>
<%= @current_function[:description] if @current_function[:description].present? %>

<%# FUNCTION CALL %>
#### Function Call
<code><%= @variable_text %>:<%= @current_function[:function_name] %>(
    <%- if not is_empty( @current_function[:parameters] ) %>
        <%# For all but the last in the parameter list, write the name + a comma after. %>
        <% @current_function[:parameters][0..-1].each do |param| %>
            <%= param[:name] %>,
        <% end %>
        <%# For the last in the parameter list, just write the name, no comma. %>
        <%= @current_function[:parameters].last[:name] %>
    <% end -%>
)</code>

<%# RETURN VALUE %>
<% if not is_empty( @current_function[:return_value_type] ) %>
    <%# Header has to be at the start of the line, unfortunately. %>
#### Return Value
    <b><code><%= @current_function[:return_value_type] %></code></b>
    <% if @current_function[:return_value_desc].present? %>
        <br>&emsp;<i><%= @current_function[:return_value_desc] %></i>
    <% end %>
<% end %>

<%# PARAMETERS %>
<% if not is_empty( @current_function[:parameters] ) %>
    <%# Header has to be at the start of the line, unfortunately. %>
#### Parameters

    <%# Print out the information on each of the parameters: Type, name, then description. %>
    <% @current_function[:parameters][0..-1] do |param| %>
        <%# For all but the last one, add in a line break afterwards. %>
        <b><code><%= param[:type] %></code></b>  <code><%= param[:name] %></code><br>
        &emsp;<i><%= param[:desc] %></i><br>
    <% end %>

    <% _last = @current_function[:parameters].last %> 

    <%# For the last in the parameter list, just write the name, no line break. %>
    <b><code><%= _last[:type] %></code></b> <code><%= _last[:name] %></code><br>
    &emsp;<i><%= _last[:desc] %></i>
<% end %>

<%# FOOT NOTES %>
<% if not is_empty( @current_function[:footnotes] ) %>
    <% @current_function[:footnotes].each do |note| %>
        <% if note[:code].present? %>
``` lua
<%= note[:code] %>
```
        <% end %>
        <aside class= <%= note[:type] %> > <%= note[:text] %> </aside>
    <% end %>
<% end %>

<%# Set @current_function to "nil" to stop it carrying over values from previous calls. %>
<% @current_function = nil %>